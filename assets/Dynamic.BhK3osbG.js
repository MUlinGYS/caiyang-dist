var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,t=(a,l,r)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[l]=r,o=(e,a)=>{for(var l in a||(a={}))m.call(a,l)&&t(e,l,a[l]);if(r)for(var l of r(a))s.call(a,l)&&t(e,l,a[l]);return e},n=(e,r)=>a(e,l(r));import{q as i,s as p,_ as u}from"./index.CeC0tU_n.js";import{_ as d}from"./ButtonTable.Wy4_F4MB.js";/* empty css               */import{d as g,r as b,Z as c,j as h,c as w,b as v,w as f,aK as N,_ as V,H as y,L as D,M as T,I as _,$ as k,aR as L,a as P,aI as C,a0 as R,C as x,e as F,aj as U,P as j,N as I,o as M}from"./vendor.FiRDnaVi.js";const q={class:"page-content"},O={class:"dialog-footer"},$=u(g({__name:"Dynamic",setup(e){const a=b("add"),l=b(!1),r=c({sampleNumber:"",samplingDate:"",startTime:"",endTime:"",sampleName:"",samplingLocation:"",averageFlow:"",samplingDuration:""}),m=c([{name:"样品编号",show:!0},{name:"采样日期",show:!0},{name:"开始时间",show:!0},{name:"结束时间",show:!0},{name:"样品名称",show:!0},{name:"采样地点",show:!0},{name:"平均流量 (LPM)",show:!0},{name:"采样时长 (min)",show:!0},{name:"累计体积 (L)",show:!0},{name:"采样计划",show:!0},{name:"平均气温",show:!0},{name:"气温范围",show:!0},{name:"平均气压",show:!0},{name:"气压范围",show:!0},{name:"设备信息",show:!0},{name:"计量编号",show:!0},{name:"采样通道",show:!0}]),s=b(),t=c({sampleNumber:"",samplingDate:"",sampleName:"",samplingLocation:""}),u=c([{sampleNumber:"001",samplingDate:"2023-10-01",startTime:"08:00",endTime:"10:00",sampleName:"样品A",samplingLocation:"地点1",averageFlow:"1.5",samplingDuration:"120",cumulativeVolume:"180",samplingPlan:"计划A",averageTemperature:"25",temperatureRange:"20-30",averagePressure:"101",pressureRange:"100-102",deviceInfo:"设备1",measurementNumber:"M001",samplingChannel:"通道1"},{sampleNumber:"002",samplingDate:"2023-10-02",startTime:"09:00",endTime:"11:00",sampleName:"样品B",samplingLocation:"地点2",averageFlow:"2.0",samplingDuration:"120",cumulativeVolume:"240",samplingPlan:"计划B",averageTemperature:"26",temperatureRange:"21-31",averagePressure:"102",pressureRange:"101-103",deviceInfo:"设备2",measurementNumber:"M002",samplingChannel:"通道2"}]),g=h((()=>u.filter((e=>(""===t.sampleNumber||e.sampleNumber.includes(t.sampleNumber))&&(""===t.samplingDate||e.samplingDate.includes(t.samplingDate))&&(""===t.sampleName||e.sampleName.includes(t.sampleName))&&(""===t.samplingLocation||e.samplingLocation.includes(t.samplingLocation)))))),$=(e,m)=>{l.value=!0,a.value=e,"edit"===e&&m?(r.sampleNumber=m.sampleNumber,r.samplingDate=m.samplingDate,r.startTime=m.startTime,r.endTime=m.endTime,r.sampleName=m.sampleName,r.samplingLocation=m.samplingLocation,r.averageFlow=m.averageFlow,r.samplingDuration=m.samplingDuration):(r.sampleNumber="",r.samplingDate="",r.startTime="",r.endTime="",r.sampleName="",r.samplingLocation="",r.averageFlow="",r.samplingDuration="")},B=()=>{},H=e=>{m.length=0,m.push(...e)},Y=c({sampleNumber:[{required:!0,message:"请输入样品编号",trigger:"blur"},{pattern:/^[a-zA-Z0-9]+$/,message:"样品编号只能包含字母和数字",trigger:"blur"}],samplingDate:[{required:!0,message:"请输入采样日期",trigger:"blur"},{pattern:/^\d{4}-\d{2}-\d{2}$/,message:"请输入正确的日期格式（YYYY-MM-DD）",trigger:"blur"}],startTime:[{required:!0,message:"请输入开始时间",trigger:"blur"},{pattern:/^\d{2}:\d{2}$/,message:"请输入正确的时间格式（HH:MM）",trigger:"blur"}],endTime:[{required:!0,message:"请输入结束时间",trigger:"blur"},{pattern:/^\d{2}:\d{2}$/,message:"请输入正确的时间格式（HH:MM）",trigger:"blur"}],sampleName:[{required:!0,message:"请输入样品名称",trigger:"blur"},{min:2,max:50,message:"样品名称长度在 2 到 50 个字符之间",trigger:"blur"}],samplingLocation:[{required:!0,message:"请输入采样地点",trigger:"blur"},{min:2,max:50,message:"采样地点长度在 2 到 50 个字符之间",trigger:"blur"}],averageFlow:[{required:!0,message:"请输入平均流量",trigger:"blur"},{pattern:/^\d+(\.\d+)?$/,message:"请输入有效的数字",trigger:"blur"}],samplingDuration:[{required:!0,message:"请输入采样时长",trigger:"blur"},{pattern:/^\d+$/,message:"请输入有效的整数",trigger:"blur"}]}),A=b(),S=()=>{return e=this,m=null,s=function*(){A.value&&(yield A.value.validate((e=>{if(e){if("add"===a.value)u.push(n(o({},r),{cumulativeVolume:"",samplingPlan:"",averageTemperature:"",temperatureRange:"",averagePressure:"",pressureRange:"",deviceInfo:"",measurementNumber:"",samplingChannel:""}));else{const e=u.findIndex((e=>e.sampleNumber===r.sampleNumber));-1!==e&&(u[e]=n(o({},r),{cumulativeVolume:u[e].cumulativeVolume||"",samplingPlan:u[e].samplingPlan||"",averageTemperature:u[e].averageTemperature||"",temperatureRange:u[e].temperatureRange||"",averagePressure:u[e].averagePressure||"",pressureRange:u[e].pressureRange||"",deviceInfo:u[e].deviceInfo||"",measurementNumber:u[e].measurementNumber||"",samplingChannel:u[e].samplingChannel||""}))}j.success("add"===a.value?"添加成功":"更新成功"),l.value=!1}})))},new Promise(((a,l)=>{var r=e=>{try{o(s.next(e))}catch(a){l(a)}},t=e=>{try{o(s.throw(e))}catch(a){l(a)}},o=e=>e.done?a(e.value):Promise.resolve(e.value).then(r,t);o((s=s.apply(e,m)).next())}));var e,m,s},z=()=>{j.info("导出功能待实现")};return(e,o)=>{const n=p,b=L,c=k,h=_,Z=i,E=C,K=d,G=N,J=x,Q=R,W=V,X=I("ripple");return M(),w("div",q,[v(Z,{showTop:!1,onSearch:B,onReset:o[5]||(o[5]=e=>{var a;(a=s.value)&&a.resetFields()}),onChangeColumn:H,columns:m},{top:f((()=>[v(c,{model:t,ref_key:"searchFormRef",ref:s,"label-width":"82px",class:"search-form"},{default:f((()=>[v(b,{gutter:20},{default:f((()=>[v(n,{label:"样品编号",prop:"sampleNumber",modelValue:t.sampleNumber,"onUpdate:modelValue":o[0]||(o[0]=e=>t.sampleNumber=e)},null,8,["modelValue"]),v(n,{label:"采样日期",prop:"samplingDate",modelValue:t.samplingDate,"onUpdate:modelValue":o[1]||(o[1]=e=>t.samplingDate=e)},null,8,["modelValue"]),v(n,{label:"样品名称",prop:"sampleName",modelValue:t.sampleName,"onUpdate:modelValue":o[2]||(o[2]=e=>t.sampleName=e)},null,8,["modelValue"]),v(n,{label:"采样地点",prop:"samplingLocation",modelValue:t.samplingLocation,"onUpdate:modelValue":o[3]||(o[3]=e=>t.samplingLocation=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),bottom:f((()=>[y((M(),D(h,{onClick:o[4]||(o[4]=e=>$("add"))},{default:f((()=>o[16]||(o[16]=[T("添加记录")]))),_:1})),[[X]]),y((M(),D(h,{onClick:z},{default:f((()=>o[17]||(o[17]=[T("导出记录")]))),_:1})),[[X]])])),_:1},8,["columns"]),v(G,{data:g.value,selection:"",currentPage:1,pageSize:10,total:g.value.length,height:"650"},{default:f((()=>[v(E,{type:"selection",width:"55"}),m[0].show?(M(),D(E,{key:0,label:"样品编号",prop:"sampleNumber",fixed:"",width:"150"})):P("",!0),m[1].show?(M(),D(E,{key:1,label:"采样日期",prop:"samplingDate",width:"150"})):P("",!0),m[2].show?(M(),D(E,{key:2,label:"开始时间",prop:"startTime",width:"150"})):P("",!0),m[3].show?(M(),D(E,{key:3,label:"结束时间",prop:"endTime",width:"150"})):P("",!0),m[4].show?(M(),D(E,{key:4,label:"样品名称",prop:"sampleName",width:"150"})):P("",!0),m[5].show?(M(),D(E,{key:5,label:"采样地点",prop:"samplingLocation",width:"150"})):P("",!0),m[6].show?(M(),D(E,{key:6,label:"平均流量 (LPM)",prop:"averageFlow",width:"150"})):P("",!0),m[7].show?(M(),D(E,{key:7,label:"采样时长 (min)",prop:"samplingDuration",width:"150"})):P("",!0),m[8].show?(M(),D(E,{key:8,label:"累计体积 (L)",prop:"cumulativeVolume",width:"150"})):P("",!0),m[9].show?(M(),D(E,{key:9,label:"采样计划",prop:"samplingPlan",width:"150"})):P("",!0),m[10].show?(M(),D(E,{key:10,label:"平均气温",prop:"averageTemperature",width:"150"})):P("",!0),m[11].show?(M(),D(E,{key:11,label:"气温范围",prop:"temperatureRange",width:"150"})):P("",!0),m[12].show?(M(),D(E,{key:12,label:"平均气压",prop:"averagePressure",width:"150"})):P("",!0),m[13].show?(M(),D(E,{key:13,label:"气压范围",prop:"pressureRange",width:"150"})):P("",!0),m[14].show?(M(),D(E,{key:14,label:"设备信息",prop:"deviceInfo",width:"150"})):P("",!0),m[15].show?(M(),D(E,{key:15,label:"计量编号",prop:"measurementNumber",width:"150"})):P("",!0),m[16].show?(M(),D(E,{key:16,label:"采样通道",prop:"samplingChannel",width:"150"})):P("",!0),v(E,{label:"操作",fixed:"right",width:"150px"},{default:f((e=>[v(K,{type:"edit",onClick:a=>$("edit",e.row)},null,8,["onClick"]),v(K,{type:"delete",onClick:()=>{return a=e.row,void U.confirm("确定要删除该记录吗？","删除记录",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then((()=>{const e=u.findIndex((e=>e.sampleNumber===a.sampleNumber));-1!==e&&(u.splice(e,1),j.success("删除成功"))}));var a}},null,8,["onClick"])])),_:1})])),_:1},8,["data","total"]),v(W,{modelValue:l.value,"onUpdate:modelValue":o[15]||(o[15]=e=>l.value=e),title:"add"===a.value?"添加记录":"编辑记录",width:"30%"},{footer:f((()=>[F("div",O,[v(h,{onClick:o[14]||(o[14]=e=>l.value=!1)},{default:f((()=>o[18]||(o[18]=[T("取消")]))),_:1}),v(h,{type:"primary",onClick:S},{default:f((()=>o[19]||(o[19]=[T("提交")]))),_:1})])])),default:f((()=>[v(c,{ref_key:"formRef",ref:A,model:r,rules:Y,"label-width":"80px"},{default:f((()=>[v(Q,{label:"样品编号",prop:"sampleNumber"},{default:f((()=>[v(J,{modelValue:r.sampleNumber,"onUpdate:modelValue":o[6]||(o[6]=e=>r.sampleNumber=e)},null,8,["modelValue"])])),_:1}),v(Q,{label:"采样日期",prop:"samplingDate"},{default:f((()=>[v(J,{modelValue:r.samplingDate,"onUpdate:modelValue":o[7]||(o[7]=e=>r.samplingDate=e)},null,8,["modelValue"])])),_:1}),v(Q,{label:"开始时间",prop:"startTime"},{default:f((()=>[v(J,{modelValue:r.startTime,"onUpdate:modelValue":o[8]||(o[8]=e=>r.startTime=e)},null,8,["modelValue"])])),_:1}),v(Q,{label:"结束时间",prop:"endTime"},{default:f((()=>[v(J,{modelValue:r.endTime,"onUpdate:modelValue":o[9]||(o[9]=e=>r.endTime=e)},null,8,["modelValue"])])),_:1}),v(Q,{label:"样品名称",prop:"sampleName"},{default:f((()=>[v(J,{modelValue:r.sampleName,"onUpdate:modelValue":o[10]||(o[10]=e=>r.sampleName=e)},null,8,["modelValue"])])),_:1}),v(Q,{label:"采样地点",prop:"samplingLocation"},{default:f((()=>[v(J,{modelValue:r.samplingLocation,"onUpdate:modelValue":o[11]||(o[11]=e=>r.samplingLocation=e)},null,8,["modelValue"])])),_:1}),v(Q,{label:"平均流量",prop:"averageFlow"},{default:f((()=>[v(J,{modelValue:r.averageFlow,"onUpdate:modelValue":o[12]||(o[12]=e=>r.averageFlow=e)},null,8,["modelValue"])])),_:1}),v(Q,{label:"采样时长",prop:"samplingDuration"},{default:f((()=>[v(J,{modelValue:r.samplingDuration,"onUpdate:modelValue":o[13]||(o[13]=e=>r.samplingDuration=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-729b3dd5"]]);export{$ as default};
