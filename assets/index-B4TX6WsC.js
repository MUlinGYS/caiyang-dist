var e=(e,s,a)=>new Promise(((t,l)=>{var o=e=>{try{i(a.next(e))}catch(s){l(s)}},r=e=>{try{i(a.throw(e))}catch(s){l(s)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(o,r);i((a=a.apply(e,s)).next())}));import{_ as s,b as a,c as t,S as l,d as o,u as r,e as i,f as n,l as d,g as u,U as c,A as g,H as h}from"./index-rOxHBf93.js";import{d as p,Z as v,aS as f,r as m,f as y,aT as x,j as w,c as b,e as k,v as _,u as T,ag as M,a as $,M as B,x as L,o as I,b as P,w as V,ah as C,D as z,$ as S,ai as D,F as X,A as E,ak as F,a0 as U,C as A,m as H,aE as j,z as O,H as R,L as q,I as K,a3 as N,N as Y,P as G,ay as J}from"./vendor-D3DmZvU-.js";import{L as Z}from"./LeftView-jzBCSXC0.js";import"./lf_icon2-BRyz9ns7.js";const Q=["innerHTML"],W=s(p({__name:"DragVerify",props:{value:{type:Boolean,default:!1},width:{default:260},height:{default:44},text:{default:"按住滑块拖动"},successText:{default:"success"},background:{default:"#eee"},progressBarBg:{default:"#1385FF"},completedBg:{default:"#57D187"},circle:{type:Boolean,default:!1},radius:{default:"calc(var(--custom-radius) / 2 + 2px)"},handlerIcon:{default:"&#xea50;"},successIcon:{default:"&#xe621;"},handlerBg:{default:"#fff"},textSize:{default:"13px"},textColor:{default:"#333"}},emits:["handlerMove","update:value","passCallback"],setup(e,{expose:s,emit:a}){const t=a,l=e,o=v({isMoving:!1,x:0,isOk:!1}),{isOk:r}=f(o),i=m(),n=m(),d=m(),u=m();let c,g,h,p;const P=e=>{c=e.targetTouches[0].pageX,g=e.targetTouches[0].pageY},V=e=>{h=e.targetTouches[0].pageX,p=e.targetTouches[0].pageY,Math.abs(h-c)>Math.abs(p-g)&&e.preventDefault()};document.addEventListener("touchstart",P),document.addEventListener("touchmove",V,{passive:!1}),y((()=>{var e,s,a;null==(e=i.value)||e.style.setProperty("--textColor",l.textColor),null==(s=i.value)||s.style.setProperty("--width",Math.floor(l.width/2)+"px"),null==(a=i.value)||a.style.setProperty("--pwidth",-Math.floor(l.width/2)+"px"),document.addEventListener("touchstart",P),document.addEventListener("touchmove",V,{passive:!1})})),x((()=>{document.removeEventListener("touchstart",P),document.removeEventListener("touchmove",V)}));const C={left:"0",width:l.height+"px",height:l.height+"px",background:l.handlerBg},z={width:l.width+"px",height:l.height+"px",lineHeight:l.height+"px",background:l.background,borderRadius:l.circle?l.height/2+"px":l.radius},S={background:l.progressBarBg,height:l.height+"px",borderRadius:l.circle?l.height/2+"px 0 0 "+l.height/2+"px":l.radius},D={height:l.height+"px",width:l.width+"px",fontSize:l.textSize},X=w((()=>l.value?l.successText:l.text)),E=e=>{l.value||(o.isMoving=!0,d.value.style.transition="none",o.x=(e.pageX||e.touches[0].pageX)-parseInt(d.value.style.left.replace("px",""),10)),t("handlerMove")},F=e=>{if(o.isMoving&&!l.value){let s=(e.pageX||e.touches[0].pageX)-o.x;s>0&&s<=l.width-l.height?(d.value.style.left=s+"px",u.value.style.width=s+l.height/2+"px"):s>l.width-l.height&&(d.value.style.left=l.width-l.height+"px",u.value.style.width=l.width-l.height/2+"px",A())}},U=e=>{if(o.isMoving&&!l.value){(e.pageX||e.changedTouches[0].pageX)-o.x<l.width-l.height?(o.isOk=!0,d.value.style.left="0",d.value.style.transition="all 0.2s",u.value.style.width="0",o.isOk=!1):(d.value.style.transition="none",d.value.style.left=l.width-l.height+"px",u.value.style.width=l.width-l.height/2+"px",A()),o.isMoving=!1}},A=()=>{t("update:value",!0),o.isMoving=!1,u.value.style.background=l.completedBg,n.value.style["-webkit-text-fill-color"]="unset",n.value.style.animation="slidetounlock2 3s infinite",n.value.style.color="#fff",t("passCallback")};return s({reset:()=>{d.value.style.left="0",u.value.valueFormat.style.width="0",d.value.children[0].type=l.handlerIcon,n.value.style["-webkit-text-fill-color"]="transparent",n.value.style.animation="slidetounlock 3s infinite",n.value.style.color=l.background}}),(e,s)=>(I(),b("div",{ref_key:"dragVerify",ref:i,class:"drag_verify",style:z,onMousemove:F,onMouseup:U,onMouseleave:U,onTouchmove:F,onTouchend:U},[k("div",{class:_(["dv_progress_bar",{goFirst2:T(r)}]),ref_key:"progressBar",ref:u,style:S},null,2),k("div",{class:"dv_text",style:D,ref_key:"messageRef",ref:n},[e.$slots.textBefore?M(e.$slots,"textBefore",{key:0},void 0,!0):$("",!0),B(" "+L(X.value)+" ",1),e.$slots.textAfter?M(e.$slots,"textAfter",{key:1},void 0,!0):$("",!0)],512),k("div",{class:_(["dv_handler dv_handler_bg",{goFirst:T(r)}]),onMousedown:E,onTouchstart:E,ref_key:"handler",ref:d,style:C},[k("i",{class:"iconfont-sys",innerHTML:e.value?e.successIcon:e.handlerIcon},null,8,Q)],34)],544))}}),[["__scopeId","data-v-40c71f03"]]),ee={class:"login"},se={class:"left-wrap"},ae={class:"right-wrap"},te={class:"top-right-wrap"},le={class:"iconfont-sys"},oe={class:"menu-txt"},re={key:0,class:"iconfont-sys icon-check"},ie={class:"header"},ne={class:"login-wrap"},de={class:"form"},ue={class:"title"},ce={class:"sub-title"},ge={class:"drag-verify"},he={class:"forget-password"},pe={style:{"margin-top":"30px"}},ve={class:"footer"},fe=s(p({__name:"index",setup(s){const{t:p}=a(),f=t(),y=N(),x=m(!1),M=m(!1),Q=l.name,fe=m(),me=v({username:l.login.username,password:l.login.password,rememberPassword:!0}),ye=w((()=>({username:[{required:!0,message:p("login.placeholder[0]"),trigger:"blur"}],password:[{required:!0,message:p("login.placeholder[1]"),trigger:"blur"}]}))),xe=m(!1),{width:we}=o(),be=r(),ke=w((()=>be.isDark)),_e=()=>{},Te=()=>e(this,null,(function*(){fe.value&&(yield fe.value.validate((s=>e(this,null,(function*(){if(s){if(!x.value)return void(M.value=!0);xe.value=!0;const e=e=>new Promise((s=>setTimeout(s,e)));try{const s=yield c.login({body:JSON.stringify({username:me.username,password:me.password})});if(s.code===g.success&&s.data){f.setToken(s.data.accessToken);const a=yield c.getUserInfo();a.code===g.success&&f.setUserInfo(a.data),f.setLoginStatus(!0),yield e(1e3),Me(),y.push(h)}else G.error(s.message)}finally{yield e(1e3),xe.value=!1}}})))))})),Me=()=>{setTimeout((()=>{J({title:p("login.success.title"),type:"success",showClose:!1,duration:2500,zIndex:1e4,message:`${p("login.success.message")}, ${Q}!`})}),300)},{locale:$e}=a(),Be=e=>{$e.value!==e&&($e.value=e,f.setLanguage(e))},Le=()=>{let{LIGHT:e,DARK:s}=i;n().switchTheme(r().systemThemeType===e?s:e)};return(e,s)=>{const a=F,t=D,l=C,o=A,r=U,i=W,n=j,c=O("router-link"),g=K,h=S,p=Y("ripple");return I(),b("div",ee,[k("div",se,[P(Z)]),k("div",ae,[k("div",te,[k("div",{class:"btn theme-btn",onClick:Le},[k("i",le,L(T(ke)?"":""),1)]),P(l,{onCommand:Be,"popper-class":"langDropDownStyle"},{dropdown:V((()=>[P(t,null,{default:V((()=>[(I(!0),b(X,null,E(T(d),(e=>(I(),b("div",{key:e.value,class:"lang-btn-item"},[P(a,{command:e.value,class:_({"is-selected":T($e)===e.value})},{default:V((()=>[k("span",oe,L(e.label),1),T($e)===e.value?(I(),b("i",re,"")):$("",!0)])),_:2},1032,["command","class"])])))),128))])),_:1})])),default:V((()=>[s[4]||(s[4]=k("div",{class:"btn language-btn"},[k("i",{class:"iconfont-sys icon-language"},"")],-1))])),_:1})]),k("div",ie,[s[5]||(s[5]=k("svg",{class:"icon","aria-hidden":"true"},[k("use",{"xlink:href":"#iconsys-zhaopian-copy"})],-1)),k("h1",null,L(T(Q)),1)]),k("div",ne,[k("div",de,[k("h3",ue,L(e.$t("login.title")),1),k("p",ce,L(e.$t("login.subTitle")),1),P(h,{ref_key:"formRef",ref:fe,model:T(me),rules:T(ye),onKeyup:z(Te,["enter"]),style:{"margin-top":"25px"}},{default:V((()=>[P(r,{prop:"username"},{default:V((()=>[P(o,{placeholder:e.$t("login.placeholder[0]"),size:"large",modelValue:T(me).username,"onUpdate:modelValue":s[0]||(s[0]=e=>T(me).username=e),modelModifiers:{trim:!0}},null,8,["placeholder","modelValue"])])),_:1}),P(r,{prop:"password"},{default:V((()=>[P(o,{placeholder:e.$t("login.placeholder[1]"),size:"large",modelValue:T(me).password,"onUpdate:modelValue":s[1]||(s[1]=e=>T(me).password=e),modelModifiers:{trim:!0},type:"password",radius:"8px",autocomplete:"off"},null,8,["placeholder","modelValue"])])),_:1}),k("div",ge,[k("div",{class:_(["drag-verify-content",{error:!T(x)&&T(M)}])},[P(i,{ref:"dragVerify",value:T(x),"onUpdate:value":s[2]||(s[2]=e=>H(x)?x.value=e:null),width:T(we)<500?328:438,text:e.$t("login.sliderText"),textColor:"var(--art-gray-800)",successText:e.$t("login.sliderSuccessText"),progressBarBg:T(u)("--el-color-primary"),background:"var(--art-gray-200)",handlerBg:"var(--art-main-bg-color)",onPass:_e},null,8,["value","width","text","successText","progressBarBg"])],2),k("p",{class:_(["error-text",{"show-error-text":!T(x)&&T(M)}])},L(e.$t("login.placeholder[2]")),3)]),k("div",he,[P(n,{modelValue:T(me).rememberPassword,"onUpdate:modelValue":s[3]||(s[3]=e=>T(me).rememberPassword=e)},{default:V((()=>[B(L(e.$t("login.rememberPwd")),1)])),_:1},8,["modelValue"]),P(c,{to:"/forget-password"},{default:V((()=>[B(L(e.$t("login.forgetPwd")),1)])),_:1})]),k("div",pe,[R((I(),q(g,{class:"login-btn",size:"large",type:"primary",onClick:Te,loading:T(xe)},{default:V((()=>[B(L(e.$t("login.btnText")),1)])),_:1},8,["loading"])),[[p]])]),k("div",ve,[k("p",null,[B(L(e.$t("login.noAccount"))+" ",1),P(c,{to:"/register"},{default:V((()=>[B(L(e.$t("login.register")),1)])),_:1})])])])),_:1},8,["model","rules"])])])])])}}}),[["__scopeId","data-v-49d2ce9f"]]);export{fe as default};
